<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mirror Affirmations</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script>
    const affirmations = [
      "Mimi ni nuru ya kweli.",
      "Nimeumbwa kwa kusudi maalum.",
      "Leo najipenda bila masharti.",
      "Nina nguvu ya kuponya nafsi yangu.",
      "Mikosi haina mamlaka juu yangu tena."
    ];

    let currentAffirmation = 0;

    function nextAffirmation() {
      currentAffirmation = (currentAffirmation + 1) % affirmations.length;
      document.getElementById('affirmation').innerText = affirmations[currentAffirmation];
    }

    function speakAffirmation() {
      const utterance = new SpeechSynthesisUtterance(document.getElementById('affirmation').innerText);
      utterance.lang = 'sw-TZ';
      speechSynthesis.speak(utterance);
    }

    async function startCamera() {
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'user' }, audio: false });
        const video = document.getElementById('mirror');
        video.srcObject = stream;
      } catch (err) {
        console.error("Failed to access camera:", err);
      }
    }

    window.onload = () => {
      document.getElementById('affirmation').innerText = affirmations[0];
      startCamera();
    }
  </script>
</head>
<body class="bg-gray-900 text-white flex flex-col items-center justify-center min-h-screen px-4">
  <h1 class="text-3xl font-bold mb-4 text-center">ðŸªž Mirror Affirmations</h1>

  <!-- Video Mirror -->
  <video id="mirror" autoplay playsinline class="rounded-2xl border-4 border-white shadow-lg w-full max-w-md mb-6"></video>

  <!-- Affirmation Text -->
  <div id="affirmation" class="text-xl text-center font-medium mb-4 px-4">Loading affirmations...</div>

  <!-- Buttons -->
  <div class="flex gap-4">
    <button onclick="nextAffirmation()" class="bg-white text-gray-900 font-bold py-2 px-4 rounded-xl shadow">Next Affirmation</button>
    <button onclick="speakAffirmation()" class="bg-blue-600 text-white font-bold py-2 px-4 rounded-xl shadow">Speak</button>
  </div>
</body>
</html>
